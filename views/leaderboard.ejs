<%- include ('partials/header.ejs') %>
  <% count=0 %>
    <div>
      <div class="innerboxt">
        <div class="inntoinn">
          <h1 class="leaderboard-heading text-center" style="
            text-align: center;
            font-family: Lora;
            font-weight: 900;
            font-size: 2.6rem;
          ">
            Leaderboard
          </h1>
          <table class="leaderboard-table table table-striped table-responsive-md">
            <thead>
              <tr class="bg-dark text-white">
                <th scope="col" class="font-weight-bold">Index</th>
                <th scope="col" class="font-weight-bold">Name</th>
                <th scope="col" class="font-weight-bold">Campus Ambassdor ID</th>
                <th scope="col" class="font-weight-bold">Points</th>
                <th scope="col" class="font-weight-bold">User Group</th>
              </tr>
            </thead>
            <tbody>
              <% users.forEach(function(user){ %>
                <% count+=1;%>
                  <tr>
                    <td>
                      <%= count %>
                    </td>

                    <% if (user.username===king.username){ rank=count;%>
                      <td>
                        <%= king.fullname %>
                      </td>
                      <% }else{%>
                        <td>
                          <%= user.fullname %>
                        </td>
                        <%}%>

                          <td> <%= user.username %>
                          </td>
                          <td>
                            <!-- <%sum=0%>
                            <%[0,1,2,3,4,5,6,7,8,9].forEach(function(points){
                                      sum+=user['task'+points.toString()][0]})%> -->
                            <%=user.points %>
                          </td>
                          <td>
                            <%if(count<= 10){ %>
                              Diamond
                              <% }else if(count>10 && count <= 25){ %>
                                  Platinum
                                  <% }else if(count>25 && count<= 50){%>
                                    Gold
                                    <% }else if(count>50 && count<= 100){%>
                                      Sapphire
                                        <% }else {%>
                                          Jade
                                    <%}%>
                          </td>
                  </tr>
                  <% })%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="btn btn-warning d-flex-column m-4  p-3">
      <h4><strong>Your rank : <%= rank %></strong>
      </h4>

    </div>
    <%- include ('partials/footer.ejs') %>